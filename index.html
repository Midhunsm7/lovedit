<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>For Unnati üíú</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;1,400&family=Great+Vibes&display=swap" rel="stylesheet">

<!-- GSAP -->
<script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>

<style>
* { 
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent;
}

html { 
  scroll-behavior: smooth;
  height: 100%;
}

body {
  margin: 0;
  min-height: 100%;
  background: #673AB7;
  background: -webkit-linear-gradient(to right, #512DA8, #673AB7);
  background: linear-gradient(to right, #512DA8, #673AB7);
  font-family: 'Playfair Display', serif;
  color: #3a235e;
  padding: 0;
  overflow-x: hidden;
  touch-action: pan-y;
}

/* ===================== */
/* ‚¨ÜÔ∏è Scroll Hint */
/* ===================== */
.scroll-hint {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.85rem;
  color: #fff;
  opacity: 0.9;
  letter-spacing: 0.08em;
  animation: float 2s infinite ease-in-out;
  z-index: 5;
  text-align: center;
  padding: 0 15px;
  width: 100%;
  max-width: 300px;
  pointer-events: none;
}

@keyframes float {
  0%,100% { transform: translate(-50%, 0); }
  50% { transform: translate(-50%, -8px); }
}

/* ===================== */
/* ‚ù§Ô∏è Loader */
/* ===================== */
.loader {
  position: fixed;
  inset: 0;
  background: inherit;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  -webkit-backface-visibility: hidden;
}

.cssload-main * { 
  font-size: 48px; 
}

@media (max-width: 480px) {
  .cssload-main * { 
    font-size: 42px; 
  }
}

.cssload-heart {
  animation: spin 2.8s infinite ease-in-out;
  position: relative;
}

.cssload-heartL,
.cssload-heartR {
  width: 1em;
  height: 1em;
  background: rgb(252,0,101);
  border-radius: 50%;
  position: absolute;
}

.cssload-heartL { transform: translate(-21px,-20px); }
.cssload-heartR { transform: translate(21px,-20px); }

.cssload-square {
  width: 1em;
  height: 1em;
  background: rgb(252,0,101);
  transform: rotate(-45deg);
}

@keyframes spin {
  100% { transform: rotate(720deg); }
}

/* ===================== */
/* ‚úâÔ∏è Envelope Container */
/* ===================== */
.envelope-container {
  width: 100%;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  padding: 120px 15px 60px;
}

.envelope {
  width: 100%;
  max-width: 500px;
  perspective: 1200px;
  cursor: pointer;
  opacity: 0;
  position: relative;
  margin: 0 auto;
}

.envelope-flap {
  height: 140px;
  background: linear-gradient(#e5d4ff, #ccb4ff);
  border-radius: 12px 12px 0 0;
  transform-origin: top;
}

.envelope-body {
  background: #fdf8ff;
  border-radius: 0 0 12px 12px;
  padding: 20px;
  box-shadow: 0 20px 60px rgba(0,0,0,.25);
}

/* ===================== */
/* üìú Letter */
/* ===================== */
.letter {
  background: #fff;
  padding: clamp(20px, 5vw, 40px);
  border-radius: 10px;
  transform: translateY(-40px) scale(0.95);
  opacity: 0;
  -webkit-transform: translateY(-40px) scale(0.95);
}

.letter-title {
  font-family: 'Great Vibes', cursive;
  font-size: clamp(2.2rem, 7vw, 3.2rem);
  text-align: center;
  color: #7b3fe4;
  margin-bottom: 25px;
  line-height: 1.2;
  word-wrap: break-word;
  padding: 0 10px;
}

/* ===================== */
/* ‚ù§Ô∏è Heart Scene */
/* ===================== */
.heart-stage {
  display: none;
  position: relative;
  height: 200px;
  text-align: center;
  width: 100%;
  margin-bottom: 20px;
}

.flying-heart {
  font-size: 3rem;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  cursor: pointer;
  touch-action: manipulation;
  z-index: 2;
}

.heart-text {
  margin-top: 120px;
  opacity: 0;
  color: #5b2d8b;
  font-size: 1.1rem;
  padding: 0 15px;
  text-align: center;
  line-height: 1.5;
}

/* ===================== */
/* ‚úçÔ∏è Letter Content */
/* ===================== */
.content {
  width: 100%;
}

.line {
  font-size: clamp(0.95rem, 3vw, 1.05rem);
  line-height: 1.8;
  margin-bottom: 14px;
  opacity: 0;
  transform: translateY(15px);
  padding: 0 5px;
  text-align: justify;
  hyphens: auto;
  -webkit-hyphens: auto;
}

.highlight {
  color: #7b3fe4;
  font-style: italic;
  font-weight: 600;
}

.end {
  margin-top: 40px;
  text-align: center;
  font-size: 1.2rem;
  color: #7b3fe4;
  opacity: 0;
  padding: 0 15px;
  line-height: 1.6;
}

/* ===================== */
/* Mobile Optimizations */
/* ===================== */
@media (max-width: 768px) {
  .envelope-container {
    padding: 100px 12px 40px;
  }
  
  .envelope-flap {
    height: 120px;
  }
  
  .envelope-body {
    padding: 15px;
  }
  
  .letter {
    padding: 20px;
  }
  
  .heart-stage {
    height: 180px;
  }
  
  .flying-heart {
    font-size: 2.8rem;
  }
  
  .heart-text {
    margin-top: 100px;
  }
  
  .line {
    margin-bottom: 12px;
    line-height: 1.7;
  }
}

@media (max-width: 480px) {
  .envelope-container {
    padding: 90px 10px 30px;
  }
  
  .envelope-flap {
    height: 100px;
    border-radius: 8px 8px 0 0;
  }
  
  .envelope-body {
    padding: 12px;
    border-radius: 0 0 8px 8px;
  }
  
  .letter {
    padding: 18px;
    border-radius: 8px;
  }
  
  .letter-title {
    font-size: 2rem;
    margin-bottom: 20px;
  }
  
  .flying-heart {
    font-size: 2.5rem;
  }
  
  .heart-stage {
    height: 160px;
  }
  
  .heart-text {
    margin-top: 90px;
    font-size: 1rem;
  }
  
  .line {
    font-size: 0.92rem;
    line-height: 1.6;
    margin-bottom: 10px;
  }
  
  .end {
    font-size: 1.1rem;
    margin-top: 30px;
  }
}

/* Landscape orientation */
@media (max-height: 500px) and (orientation: landscape) {
  .envelope-container {
    padding: 80px 15px 30px;
  }
  
  .envelope-flap {
    height: 80px;
  }
  
  .heart-stage {
    height: 140px;
  }
  
  .heart-text {
    margin-top: 80px;
  }
}

/* Prevent text selection */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* üéµ Audio */
audio { 
  display: none; 
}
</style>
</head>

<body class="no-select">

<div class="scroll-hint" id="scrollHint">‚¨Ü Scroll or tap to open</div>

<!-- ‚ù§Ô∏è Loader -->
<div class="loader" id="loader">
  <div class="cssload-main">
    <div class="cssload-heart">
      <span class="cssload-heartL"></span>
      <span class="cssload-heartR"></span>
      <span class="cssload-square"></span>
    </div>
  </div>
</div>

<audio id="bgMusic" loop preload="auto">
  <source src="./music/Walking-Home-chosic.com_.mp3" type="audio/mpeg">
</audio>

<!-- ‚úâÔ∏è Envelope Container -->
<div class="envelope-container">
  <div class="envelope" id="envelope">
    <div class="envelope-flap" id="flap"></div>
    <div class="envelope-body">
      <div class="letter" id="letter">

        <div class="letter-title">Unnati üíú</div>

        <!-- ‚ù§Ô∏è Heart Interaction -->
        <div class="heart-stage" id="heartStage">
          <div class="flying-heart" id="heart">üíú</div>
          <div class="heart-text" id="heartText">
            This is my heart‚Ä¶ catch me ü´Ä
          </div>
        </div>

        <!-- üìú Letter Content -->
        <div class="content">
          <div class="line">This isn‚Äôt just a letter.</div>
          <div class="line">It‚Äôs my heart finally learning how to speak.</div>
          <div class="line">Jab tum muskurati ho,</div>
          <div class="line">meri duniya apni awaaz kho deti hai.</div>
          <div class="line highlight">U make me feel complete.</div>
          <div class="line">Tumhari smile soft hai, par uska asar gehra.</div>
          <div class="line">Tumhari walk mein ek sukoon hai,</div>
          <div class="line">jaise har raasta tumhe pehchaanta ho.</div>
          <div class="line highlight">Never have I ever felt so loved.</div>
          <div class="line highlight">Never will I ever feel so loved.</div>
          <div class="line">The way you talk ‚Äî dheere, sachche lafzon mein,</div>
          <div class="line highlight">Aise pyaar bina bole reh jaata hai.</div>
          <div class="line highlight">Tum mera khayal rakh leti ho bina bole,</div>
          <div class="line">aur mujhe tab samajh aata hai,</div>
          <div class="line">pyaar awaaz nahi, aadat hota hai.</div>
          <div class="line">Main tumhare saath rehna chahta hoon,</div>
          <div class="line">sirf khushi mein nahi.</div>
          <div class="line">Jab tum strong ho, main proud hoon.</div>
          <div class="line">Aur jab tum thak jaati ho,</div>
          <div class="line">main tumhara sahaara banna chahta hoon.</div>
          <div class="line">Aur phir woh chhoti cheezein‚Ä¶</div>
          <div class="line">Subah uthte hi tumhara message.</div>
          <div class="line">Kabhi call, kabhi mazaak,</div>
          <div class="line highlight">I can't express everything but aur bina jaane meri poori din bana dena.</div>
          <div class="line">Agar pyaar ek kagaz hota,</div>
          <div class="line">toh main har din tum par likhta.</div>
          <div class="line highlight">Unnati, this letter is yours.</div>
          <div class="end">
            üíú I love you. Thank you for being in my life. üíú
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<script>
const loader = document.getElementById("loader");
const envelope = document.getElementById("envelope");
const flap = document.getElementById("flap");
const letter = document.getElementById("letter");
const scrollHint = document.getElementById("scrollHint");
const heartStage = document.getElementById("heartStage");
const heart = document.getElementById("heart");
const heartText = document.getElementById("heartText");
const lines = document.querySelectorAll(".line");
const music = document.getElementById("bgMusic");

let opened = false;
let isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

/* Loader ‚Üí Envelope */
window.onload = () => {
  // Hide loader after 2 seconds
  gsap.to(loader, {
    opacity: 0,
    duration: 1,
    delay: 2,
    onComplete: () => {
      loader.style.display = 'none';
    }
  });
  
  // Show envelope
  gsap.to(envelope, { 
    opacity: 1, 
    delay: 2.3,
    duration: 0.8 
  });
  
  // Show scroll hint after envelope appears
  setTimeout(() => {
    scrollHint.style.opacity = '0.9';
  }, 2500);
};

/* Open envelope on scroll or touch */
let scrollTimeout;
let lastScrollTop = 0;

window.addEventListener('scroll', function() {
  if (opened) return;
  
  clearTimeout(scrollTimeout);
  
  const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
  
  // Detect upward scroll
  if (currentScroll > lastScrollTop) {
    // Scrolling down
    scrollHint.style.opacity = '0.5';
  } else {
    // Scrolling up - trigger envelope opening
    if (currentScroll < 50) {
      openEnvelope();
    }
  }
  
  lastScrollTop = currentScroll;
  
  // Reset hint opacity after scrolling stops
  scrollTimeout = setTimeout(() => {
    if (!opened) {
      scrollHint.style.opacity = '0.9';
    }
  }, 500);
}, false);

// Also open on envelope click/tap
envelope.addEventListener('click', openEnvelope);
envelope.addEventListener('touchstart', function(e) {
  e.preventDefault();
  openEnvelope();
}, { passive: false });

function openEnvelope() {
  if (opened) return;
  opened = true;
  
  // Hide scroll hint
  gsap.to(scrollHint, {
    opacity: 0,
    duration: 0.5,
    onComplete: () => scrollHint.style.display = 'none'
  });
  
  // Play music with fade in
  if (music) {
    music.volume = 0;
    music.play().catch(e => {
      console.log("Audio play failed:", e);
      // If autoplay is blocked, play on next user interaction
      document.addEventListener('click', function playAudioOnce() {
        music.play();
        document.removeEventListener('click', playAudioOnce);
      }, { once: true });
    });
    
    gsap.to(music, { 
      volume: isMobile ? 0.25 : 0.35, 
      duration: 3,
      ease: "power2.inOut"
    });
  }
  
  // Animate envelope opening
  gsap.to(flap, { 
    rotateX: -120, 
    duration: 1.6, 
    ease: "power4.inOut" 
  });
  
  gsap.to(letter, {
    opacity: 1,
    y: 0,
    scale: 1,
    delay: 0.6,
    duration: 1.4,
    ease: "power3.out",
    onComplete: startHeart
  });
}

/* Heart scene */
function startHeart() {
  heartStage.style.display = "block";
  
  // Bounce animation for heart
  gsap.fromTo(heart, 
    { y: -100, scale: 0.8 }, 
    { 
      y: 30, 
      scale: 1,
      duration: 1.4, 
      ease: "bounce.out",
      onComplete: () => {
        // Show text after heart lands
        gsap.to(heartText, { 
          opacity: 1, 
          duration: 0.8,
          delay: 0.3 
        });
      }
    }
  );
  
  // Make heart move around (subtle on mobile)
  const moveAmount = isMobile ? 40 : 80;
  gsap.to(heart, {
    x: () => Math.random() * moveAmount * 2 - moveAmount,
    y: () => Math.random() * 30 - 15,
    duration: 1.5,
    repeat: -1,
    yoyo: true,
    ease: "sine.inOut"
  });
}

// Make heart clickable/tappable
heart.addEventListener("click", catchHeart);
heart.addEventListener("touchstart", function(e) {
  e.preventDefault();
  catchHeart();
}, { passive: false });

function catchHeart() {
  gsap.killTweensOf(heart);
  heartText.innerText = "Okay‚Ä¶ I'm yours. Have me üíú";
  
  // Animate heart being caught
  gsap.to(heart, {
    scale: 0.3,
    y: 100,
    duration: 0.8,
    ease: "power3.inOut",
    onComplete: revealLetter
  });
}

/* Reveal letter text */
function revealLetter() {
  heartStage.style.display = "none";
  
  // Animate each line appearing
  gsap.to(lines, {
    opacity: 1,
    y: 0,
    stagger: 0.18,
    duration: 0.7,
    ease: "power2.out"
  });
  
  // Show ending text
  gsap.to(".end", {
    opacity: 1,
    delay: lines.length * 0.18 + 0.5,
    duration: 1,
    ease: "power2.out"
  });
}

// Handle mobile viewport resizing
function handleResize() {
  const vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);
}

window.addEventListener('resize', handleResize);
handleResize();

// Prevent zoom on double-tap
let lastTouchEnd = 0;
document.addEventListener('touchend', function(event) {
  const now = (new Date()).getTime();
  if (now - lastTouchEnd <= 300) {
    event.preventDefault();
  }
  lastTouchEnd = now;
}, false);
</script>

</body>
</html>